<html>
<head>


<script src="jquery-1.12.0.min.js"></script>
<script language="javascript">


$( document ).ready(function() {
	
	//Variabele opzetten
	var imagesAll, imagesUnused, addedImage, index;
	imagesUsed = new Array();
	
	var image, imageCounter, dCounter, lastImage;
	dCounter = 0;
	
	//PHP bestand aanroepen die een JSON bestand terug geeft en deze in bovenstaande variabele proppen
	$.getJSON("http://127.0.0.1:80/directoryScan.php", function(json){
   		imagesAll = json;
		imagesUnused = JSON.parse(JSON.stringify(imagesAll));		
	});		
	
	//Functie om een willekeurig getal tussen min en max te krijgen
	function getRandomInt(min, max) {
	    return Math.floor(Math.random() * (max - min + 1)) + min;
	};
	
	//Divs in een array
	divid = new Array()
	divid[0] = 'nul'
	divid[1] = 'een'
	divid[2] = 'twee'
	divid[3] = 'drie'
	divid[4] = 'vier'
	divid[5] = 'vijf'
	divid[6] = 'zes'
	divid[7] = 'zeven'
	divid[8] = 'acht'
	divid[9] = 'negen'
	divid[10] = 'tien'
	divid[11] = 'elf'
	divid[12] = 'twaalf'
	divid[13] = 'dertien'
	divid[14] = 'veertien'
	divid[15] = 'vijftien'
	divid[16] = 'zestien'
	divid[17] = 'zeventien'
	divid[18] = 'achtien'
	divid[19] = 'negentien'
	
		
	function vullen() {		
		
		
		image = document.querySelector("#"+divid[dCounter]+" #plaatje");
		image.src = 'img/'+imagesAll[dCounter];

		//Plaatje toevoegen aan imagesunUsed
		addedImage = imagesAll[dCounter];
		imagesUnused.splice(addedImage,1);
		dCounter ++;
		
		
		//Laatste div: dan de willkeurige changeimage functie zoeken
		if (dCounter > (divid.length-1)) {		
			
			setInterval(changeImage,3000);
		};
	};
	
	//Functie definieren die het plaatje verandert naar een uit de array
	function changeImage() {
		
		
		//Pak een willekeurig nummer tussen 0 en het aantal elementen uit een array (minus 1, want we beginnen altijd bij 0 ipv 1)
		image.style.opacity = 1;
		randomImg = getRandomInt(0, (imagesUnused.length -1));
		randomDiv = getRandomInt(0, (divid.length-1));
		
		//Welke plaatje hebben we het over?
	    image = document.querySelector("#"+divid[randomDiv]+" #plaatje"); 
			
		lastImage = image.src;
				 //Source van het plaatje veranderen
		
		image.src = 'img/'+imagesUnused[randomImg];		 	
		//$(image).fadeOut("slow");
		//	$(image).fadeIn("slow");
		image.style.opacity = 0.5;
		
		if (lastImage.indexOf("127.0.0.1")  >= 0) {
			lastImage= lastImage.replace('http://127.0.0.1/img/', '');
		}; 
		imagesUnused.push(lastImage);
		
		addedImage = image.src;	
		if (addedImage.indexOf("127.0.0.1")  >= 0) {
			addedImage = addedImage.replace('http://127.0.0.1/img/', '');
		};
		index = imagesUnused.indexOf(addedImage);
		imagesUnused.splice(index,1);
		
	
			
	};

	
	//Voer deze functie uit tot de plaatjes op zijn (x<22)
	for(x=1; x<21; x++) window.setTimeout(vullen, 100 * x);
});

</script>
<link href="style.css" rel="stylesheet" type="text/css">

</head>

<body>
	
	<div id = "nul">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "een">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "twee">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "drie">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "vier">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "vijf">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "zes">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	
	<div id = "zeven">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "acht">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "negen">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "tien">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "elf">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "twaalf">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "dertien">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "veertien">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "vijftien">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "zestien">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "zeventien">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "achtien">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "negentien">
		<img src="ballen.gif" id="plaatje"> 
	</div>
	<div id = "twintig">
		<img src="gifgroot.gif" > 
	</div>
	
</body>
</html>
